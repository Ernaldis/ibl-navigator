<div class="daily-summary-container">
<h4>
  Daily Summary
</h4>
<form>
  <div class="filter">

  </div>
  <div>
    <button mat-raised-button (click)="applyFilter()">Apply Filter</button>
  </div>
  <div>
    <button mat-raised-button (click)="clearControl()">Reset Filter</button>
  </div>

</form>
<div class="table-container">
  <table mat-table class="col-12" [dataSource]="dataSource" matSort multiTemplateDataRows>
    <ng-container matColumnDef="lab_name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Lab </th>
      <td mat-cell *matCellDef="let summary"> {{summary.lab_name}} </td>
    </ng-container>

    <ng-container matColumnDef="subject_nickname">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Mouse Nickname </th>
      <td mat-cell *matCellDef="let summary"> {{summary.subject_nickname}} </td>
    </ng-container>

    <ng-container matColumnDef="last_session_time">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Last Session Time </th>
      <td mat-cell *matCellDef="let summary"> {{summary.last_session_time.split("T")[0]}} {{summary.last_session_time.split("T")[0]}}</td>
    </ng-container>

    <ng-container matColumnDef="latest_session_ingested">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Latest Session Ingested </th>
      <td mat-cell *matCellDef="let summary"> {{summary.latest_session_ingested.split("T")[0]}} {{summary.latest_session_ingested.split("T")[1]}}</td>
    </ng-container>

    <ng-container matColumnDef="latest_session_on_flatiron">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Latest Session on Flatiron </th>
      <td mat-cell *matCellDef="let summary"> {{summary.latest_session_on_flatiron.split("T")[0]}} {{summary.latest_session_on_flatiron.split("T")[1]}}</td>
    </ng-container>

    <ng-container matColumnDef="latest_task_protocol">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Latest Task Protocol </th>
      <td mat-cell *matCellDef="let summary"> {{summary.latest_task_protocol }} </td>
    </ng-container>

    <ng-container matColumnDef="latest_training_status">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Latest Training Status </th>
      <td mat-cell *matCellDef="let summary"> {{summary.latest_training_status }} </td>
    </ng-container>

    <ng-container matColumnDef="subject_uuid">
      <th mat-header-cell *matHeaderCellDef> Mouse UUID </th>
      <td mat-cell *matCellDef="let summary"> {{summary.subject_uuid}} </td>
    </ng-container>

    <ng-container matColumnDef="n_sessions_current_protocol">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> N sessions </th>
      <td mat-cell *matCellDef="let summary"> {{summary.n_sessions_current_protocol}} </td>
    </ng-container>

    <ng-container matColumnDef="daily_plots">
      <td colspan="9" mat-cell class="plotsCell" *matCellDef="let summary">
        <app-summary-plots [mouseInfo]="summary"></app-summary-plots>
      </td>
    </ng-container>

    <tr mat-header-row class="headerRow" *matHeaderRowDef="displayedColumns; sticky:true"></tr>
    <tr mat-row class="statRows" *matRowDef="let row; columns: displayedColumns; let summary" routerLink="/mouse/{{summary?.subject_uuid}}"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedPlots2" class="plotRows"></tr>
    <!-- <tr mat-row *matRowDef="let row; columns: displayedPlots;" class="plotRows"></tr> -->
  </table>
</div>
<div class="loading-icon" *ngIf="loading">
  <img src="assets/images/loading_icon.gif">
</div>
<mat-paginator [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions" showFirstLastButtons></mat-paginator>
</div>